<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Happy eBook</title>
        <link rel="shortcut icon" href="happy.png" type="image/x-icon">
        <link rel="stylesheet" href="style.css">
        <!-- Custom app icon (180x180 recommended for iOS) -->
        <link rel="apple-touch-icon" href="webapp.jpg">

        <link rel="manifest" href="manifest.json">

        <!-- Web app settings -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-title" content="Happy eBook">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
      	<script src="https://www.google.com/recaptcha/enterprise.js" async defer></script>
        <script type="text/javascript"
        	src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
		</script>
		<script type="text/javascript">
   			(function(){
      			emailjs.init({
        				publicKey: "9fye_6JC17x7cHKOq",
      			});
   			})();
		</script>
    </head>
    <body class="light-mode">
        <!-- Navigation Bar -->
        <nav class="navbar">
            <div class="navbar-container">
                <a href="#" class="navbar-brand" data-i18n="name">ÈñãÂøÉÈõªÂ≠êÊõ∏</a>
                <button class="navbar-toggler" aria-label="Toggle navigation">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="navbar-collapse">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a href="#home" class="nav-link active" data-i18n="home">‰∏ªÈ†Å</a></li>
                        <li class="nav-item"><a href="#ebooks" class="nav-link" data-i18n="ebooks">ÈõªÂ≠êÊõ∏</a></li>
                        <li class="nav-item"><a href="#terms" class="nav-link" data-i18n="terms">Ê¢ùÊ¨æ</a></li>
                        <li class="nav-item"><a href="#credits" class="nav-link" data-i18n="credits">Ëá¥Ë¨ù</a></li>
                        <li class="nav-item"><a href="#app" class="nav-link" data-i18n="app">ÊáâÁî®Á®ãÂºè</a></li>
                        <li class="nav-item"><a href="#settings-modal" class="ns" data-i18n="settings" id="settings-link">Ë®≠ÂÆö</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1526243741027-444d633d7365?q=80&w=1742&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Books on shelf">
                <div class="hero-overlay">
                    <br><br><br>
                    <h1 data-i18n="name">ÈñãÂøÉÈõªÂ≠êÊõ∏</h1>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="container">
            <div id="page-content"></div>
        </main>

        <!-- Settings Modal -->
        <div class="modal" id="settings-modal">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <h2 data-i18n="settings">Ë®≠ÂÆö</h2>
                <div class="setting-option">
                    <label for="dark-mode-toggle" data-i18n="dark-mode">Ê∑±Ëâ≤Ê®°Âºè</label>
                    <label class="switch">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider round"></span>
                    </label>
                </div>
                <br>
                <hr>
                <br>
                <label for="language-select" data-i18n="change-language">Language</label><br>
                <select id="language-select" class="language-selector">
                    <option value="en">English</option>
                    <option value="zh">‰∏≠Êñá</option>
                    <option value="jp">Êó•Êú¨Ë™û</option>
                </select>
                <br><br>
                <hr>
                <br>
                <a href="https://discord.gg/krmMrm6pHU" target="_blank" data-i18n="discord-server">Our Discord Server</a>
                <button id="installBtn" style="display:none;">üì≤ Install 5F eBooks</button>
            </div>
        </div>

        <script src="translation.js"></script>
        <script src="script.js"></script>

        <script>
            let deferredPrompt;

            function isAndroidChrome() {
                const ua = navigator.userAgent.toLowerCase();
                return ua.includes("android") && ua.includes("chrome") && !ua.includes("edge");
            }

            window.addEventListener('beforeinstallprompt', (e) => {
                // Prevent Chrome's default mini-infobar
                e.preventDefault();
                deferredPrompt = e;

                if (isAndroidChrome()) {
                const installBtn = document.getElementById('installBtn');
                installBtn.style.display = 'inline-block';

                installBtn.addEventListener('click', () => {
                    installBtn.style.display = 'none'; // Hide after click
                    deferredPrompt.prompt();

                    deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('‚úÖ User accepted the install prompt');
                    } else {
                        console.log('‚ùå User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                    });
                });
                }
            });
        </script>
    </body>
</html>