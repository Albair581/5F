<section class="welcome-section">
    <div class="boxxxxxx">
        <h2 data-i18n="inventory">INVENTORY</h2>
    </div>
    <br>
    <div class="boxxxxxx">
        <h2 data-i18n="scoreboard">Scoreboard</h2>
        <p style="font-style: italic;" data-i18n="scoreboard-notice">Activity started on 5/17, does not include staff.</p><br>
        <table class="fancy-table">
            <colgroup>
                <col style="width: 10%;">
                <col style="width: 50%;">
                <col style="width: 40%;">
            </colgroup>
            <thead>
                <tr>
                    <th>&num;</th>
                    <th data-i18n="ranking-name">Name</th>
                    <th data-i18n="scores">Points</th>
                </tr>
            </thead>
            <tbody id="ranking-tbody">
                
            </tbody>
        </table>
    </div>
    <script>
        function sortData(data) {
            return data.sort((a, b) => b.points - a.points);
        }

        function displayTable(data) {
            const tbody = $("#ranking-tbody");
            tbody.empty();

            data.forEach((item, index) => {
                console.log("append row:", item.name, item.points); // Debug log
                tbody.append(`
                    <tr>
                        <td>${index + 1}</td>
                        <td>${item.name}</td>
                        <td>${item.points}</td>
                    </tr>
                `);
            });
        }

        fetch('ranking.json')
            .then(response => response.json())
            .then(data => {
                const sortedData = sortData(data);
                displayTable(sortedData);
            })
            .catch(error => console.error('Error fetching JSON:', error));
    </script>
    <br>
    <div class="boxxxxxx" style="text-align: center;">
        <h2 data-i18n="perks-rules">Exchange Rules</h2>
        <div class="boxxxxxx" style="width: 100%; text-align: left;">
            <h3>Store 商店</h3>
            <div class="boxxxxxx" style="display: flex; width: 100%; overflow: auto;">
                <div style="flex: 0 0 25%; max-width: 25%;">
                    <img src="perks/priorreply.svg" alt="Priority Reply" style="width: 100%;" class="perk-img">
                </div>
                <div style="
                    flex: 1;
                    margin-left: 20px;
                    display: flex;
                    flex-direction: column;
                    align-items: flex-start;
                    justify-content: flex-start;
                    text-align: left;
                ">
                    <h3 style="font-size: 35px; margin: 0;">優先回覆 Prior Replies</h3>
                    <p style="margin: 0; font-size: 15px;">ID: 1</p>
                    <p style="margin: 0; font-size: 20px;">
                        我們通常要1~3天才會把留言審核完畢，有這個就可以更快。另外，這也可以讓你得到優先的留言回覆! You can get earlier replies from us and faster processing time!
                    </p>
                </div>
            </div><br>
            <div class="boxxxxxx" style="display: flex; width: 100%; overflow: auto;">
                <div style="flex: 0 0 25%; max-width: 25%;">
                    <img src="perks/supercomment.svg" alt="Priority Reply" style="width: 100%;" class="perk-img">
                </div>
                <div style="
                    flex: 1;
                    margin-left: 20px;
                    display: flex;
                    flex-direction: column;
                    align-items: flex-start;
                    justify-content: flex-start;
                    text-align: left;
                ">
                    <h3 style="font-size: 35px; margin: 0;">超級留言 Super Comment</h3>
                    <p style="margin: 0; font-size: 15px;">ID: 2</p>
                    <p style="margin: 0; font-size: 20px;">
                        這個可以讓你的留言置頂，也可以自己選顏色，特別的明顯。得到的分數也會依照留言內容增加喔! Your comments will be more customizable and stay at the top!
                    </p>
                </div>
            </div><br>
            <div class="boxxxxxx" style="display: flex; width: 100%; overflow: auto;">
                <div style="flex: 0 0 25%; max-width: 25%;">
                    <img src="perks/earlyview.svg" alt="Priority Reply" style="width: 100%;" class="perk-img">
                </div>
                <div style="
                    flex: 1;
                    margin-left: 20px;
                    display: flex;
                    flex-direction: column;
                    align-items: flex-start;
                    justify-content: flex-start;
                    text-align: left;
                ">
                    <h3 style="font-size: 35px; margin: 0;">試閱新刊 Beta Ticket</h3>
                    <p style="margin: 0; font-size: 15px;">ID: 3</p>
                    <p style="margin: 0; font-size: 20px;">
                        這樣就可以先看還在製作中的新週刊，例如下一期的週刊提前看等。You can now see the next magazine earlier!
                    </p>
                </div>
            </div>
        </div>
        <br>
        <div class="boxxxxxx" style="width: 100%; text-align: left;">
            <h3>How to Get Points 如何得到分數</h3>
            <p>* Good comments earn 1 point each! 好的留言可獲得一分。</p>
            <p>* Useful contributions earn 3 points each! 好的貢獻可獲得三分。</p>
            <p>* Reporting rule violators earn 10 points each! 檢舉犯規這可得十分。</p>
            <p>* Bad behavior loses scores! 壞的行為會扣分。 (DEPENDS)</p>
            <p>* Comment spams lose 10 points! 垃圾留言扣十分。</p>
            <p>* Violating rules loses 50 points! 違規會扣五十分。</p>
            <br>
            <p> &rightarrow; How much scores depends. 加/扣分的數量有我方決定。</p>
        </div>
        <br>
        <div class="boxxxxxx" style="width: 100%; text-align: left;">
            <h3>How to Redeem Points 如何兌換分數</h3>
            <p>1. Email <a href="" target="_blank" onclick="window.open(`mailto:happy.ebook.staff@gmail.com?subject=REDEEMING&body=I am [ your name ] and I'd like to redeem my scores for [ perk ID ] !`)">happy.ebook.staff@gmail.com</a></p>
            <p>2. Wait for us to reply. 等待我們回覆。</p>
            <p>3. Use the secret code in the reply to redeem your perk. 用回覆裡的密碼來兌換您的福利。</p>
            <br>
            <p> &rightarrow; The perk will only remain on the device you redeemed it with. 福利只會在你兌換的裝置上存在。</p>
            <p> &rightarrow; The secret code will expire within a week, so quickly redeem it. 密碼會在一週內過期，請盡快兌換。</p>
        </div>
    </div>
</section>